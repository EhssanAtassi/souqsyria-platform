<!-- Filter Sidebar Container -->
<div class="filter-sidebar" [attr.dir]="language() === 'ar' ? 'rtl' : 'ltr'">

  <!-- Header -->
  <div class="filter-header">
    <div class="filter-title">
      <mat-icon class="filter-icon">filter_list</mat-icon>
      <h3>{{ language() === 'ar' ? 'تصفية المنتجات' : 'Filter Products' }}</h3>
    </div>

    @if (hasActiveFilters()) {
      <button
        mat-button
        class="clear-all-btn"
        (click)="clearAll()">
        <mat-icon>clear_all</mat-icon>
        {{ language() === 'ar' ? 'مسح الكل' : 'Clear All' }}
      </button>
    }
  </div>

  <mat-divider></mat-divider>

  <!-- Active Filters Count Badge -->
  @if (activeFilterCount() > 0) {
    <div class="active-filters-badge">
      <mat-icon>check_circle</mat-icon>
      <span>
        {{ activeFilterCount() }} {{ language() === 'ar' ? 'تصفية نشطة' : 'Active Filters' }}
      </span>
    </div>
  }

  <!-- Filter Sections -->
  <mat-accordion class="filter-accordion">

    <!-- Price Range Filter -->
    <mat-expansion-panel expanded="true" class="filter-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>attach_money</mat-icon>
          {{ language() === 'ar' ? 'نطاق السعر' : 'Price Range' }}
        </mat-panel-title>
      </mat-expansion-panel-header>

      <app-price-range-filter
        [language]="language()"
        [initialMin]="currentFilters().priceRange?.min || 0"
        [initialMax]="currentFilters().priceRange?.max || 1000"
        (rangeChange)="onPriceChange($event)">
      </app-price-range-filter>
    </mat-expansion-panel>

    <!-- TODO: Enable when backend supports these filters -->
    <!-- Rating, Authenticity, Availability, and Regions filters removed temporarily -->

  </mat-accordion>

  <!-- Apply Filters Button (Mobile) -->
  <div class="filter-actions mobile-only">
    <button
      mat-raised-button
      color="primary"
      class="apply-filters-btn">
      <mat-icon>done</mat-icon>
      {{ language() === 'ar' ? 'تطبيق التصفية' : 'Apply Filters' }}
    </button>
  </div>

</div>
