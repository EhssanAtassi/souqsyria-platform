<!-- Category Search Container -->
<div
  class="category-search-container"
  [class.rtl]="isRtl()"
>
  <!-- Search Input Wrapper -->
  <div class="relative">
    <!-- Search Icon (Left for LTR, Right for RTL) -->
    <div
      class="absolute top-1/2 -translate-y-1/2 flex items-center pointer-events-none"
      [class.left-3]="!isRtl()"
      [class.right-3]="isRtl()"
    >
      <mat-icon class="text-gray-400 text-xl">search</mat-icon>
    </div>

    <!-- Search Input -->
    <input
      type="text"
      class="search-input w-full py-3 px-11 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
      [class.text-right]="isRtl()"
      [placeholder]="placeholder()"
      [value]="searchQuery()"
      (input)="onSearchInput($any($event.target).value)"
      (keydown.enter)="onEnterPress($event)"
      (keydown.escape)="onEscapePress($event)"
      [attr.aria-label]="placeholder()"
      autocomplete="off"
    />

    <!-- Loading Spinner or Clear Button (Right for LTR, Left for RTL) -->
    <div
      class="absolute top-1/2 -translate-y-1/2 flex items-center"
      [class.right-3]="!isRtl()"
      [class.left-3]="isRtl()"
    >
      <!-- Loading Spinner -->
      <mat-spinner
        *ngIf="isSearching()"
        [diameter]="20"
        [strokeWidth]="2"
        class="text-primary-500"
      ></mat-spinner>

      <!-- Clear Button -->
      <button
        *ngIf="!isSearching() && showClearButton()"
        type="button"
        class="p-1 rounded-full hover:bg-gray-100 transition-colors"
        (click)="clearSearch()"
        [attr.aria-label]="isRtl() ? 'مسح البحث' : 'Clear search'"
      >
        <mat-icon class="text-gray-400 text-xl">close</mat-icon>
      </button>
    </div>
  </div>

  <!-- Search Hint (Minimum characters) -->
  <div
    *ngIf="searchQuery().length > 0 && searchQuery().length < 2"
    class="mt-2 text-xs text-gray-500"
    [class.text-right]="isRtl()"
  >
    {{
      isRtl()
        ? 'الرجاء إدخال حرفين على الأقل للبحث'
        : 'Please enter at least 2 characters to search'
    }}
  </div>

  <!-- Empty State -->
  <div
    *ngIf="showEmptyState()"
    class="mt-8 flex flex-col items-center justify-center py-8"
  >
    <mat-icon class="text-gray-300 text-6xl mb-3">search_off</mat-icon>
    <p class="text-gray-500 text-center font-medium">
      {{
        isRtl()
          ? 'لم يتم العثور على نتائج'
          : 'No results found'
      }}
    </p>
    <p class="text-gray-400 text-sm text-center mt-1">
      {{
        isRtl()
          ? 'حاول استخدام كلمات مفتاحية مختلفة'
          : 'Try using different keywords'
      }}
    </p>
  </div>
</div>
