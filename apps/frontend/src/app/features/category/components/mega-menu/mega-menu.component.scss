/**
 * Mega Menu Component Styles
 *
 * @description Styles for responsive mega menu with desktop hover
 * and mobile accordion behaviors. Includes RTL support.
 */

.mega-menu-overlay {
  animation: fadeIn 200ms ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.mega-menu-container {
  animation: slideDown 200ms ease-out;
}

// Dropdown mode: positioned below nav bar, not full-screen overlay
.mega-menu-dropdown {
  animation: slideDown 200ms ease-out;

  // Invisible bridge above dropdown to prevent hover flickering
  .mega-menu-bridge {
    pointer-events: auto;
    background: transparent;
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Desktop category list
.category-list {
  button {
    &.active {
      color: var(--primary-600, #2563eb);
      background-color: var(--primary-50, #eff6ff);

      mat-icon {
        color: var(--primary-600, #2563eb);
      }
    }

    &:focus-visible {
      outline: 2px solid var(--primary-500, #3b82f6);
      outline-offset: -2px;
    }
  }
}

// Subcategories panel
.subcategories-panel {
  .subcategory-title {
    &:hover {
      color: var(--primary-600, #2563eb);
    }

    &:focus-visible {
      outline: 2px solid var(--primary-500, #3b82f6);
      outline-offset: 2px;
      border-radius: 4px;
    }
  }

  ul {
    li a {
      display: block;
      padding: 0.25rem 0;

      &:hover {
        color: var(--primary-600, #2563eb);
      }

      &:focus-visible {
        outline: 2px solid var(--primary-500, #3b82f6);
        outline-offset: 2px;
        border-radius: 4px;
      }
    }
  }
}

// Mobile menu
.mobile-menu-container {
  animation: slideInRight 300ms ease-out;

  // RTL support
  [dir='rtl'] & {
    animation: slideInLeft 300ms ease-out;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}

.mobile-menu-header {
  button {
    &:focus-visible {
      outline: 2px solid var(--primary-500, #3b82f6);
      outline-offset: 2px;
    }
  }
}

.mobile-category-list {
  button {
    &:active {
      transform: scale(0.98);
    }

    &:focus-visible {
      outline: 2px solid var(--primary-500, #3b82f6);
      outline-offset: 2px;
    }
  }

  .icon-container {
    transition: all 200ms ease;
  }

  button:hover .icon-container {
    background-color: var(--primary-100, #dbeafe);

    mat-icon {
      color: var(--primary-600, #2563eb);
    }
  }
}

// RTL-specific adjustments
[dir='rtl'] {
  .category-list {
    button {
      mat-icon:last-child {
        transform: rotate(180deg);
      }
    }
  }
}

// Accessibility: High contrast mode
@media (prefers-contrast: high) {
  .category-list button.active {
    outline: 2px solid currentColor;
  }
}

// Accessibility: Reduced motion
@media (prefers-reduced-motion: reduce) {
  .mega-menu-overlay,
  .mega-menu-container,
  .mobile-menu-container {
    animation: none;
  }

  * {
    transition: none !important;
  }
}
