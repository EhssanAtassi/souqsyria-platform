/**
 * Login Component Styles for SouqSyria marketplace
 *
 * @description Component-specific SCSS styles for the user login form.
 * Imports shared auth styles and animations, adds login-specific styles
 * for form options, lockout/warning messages, and remember-me hint.
 *
 * @architecture
 * RTL Strategy: Uses CSS logical properties and flexbox auto-reversal
 * instead of explicit `:host-context([dir="rtl"])` overrides.
 * Animations: Imported from shared _animations.scss (no duplication).
 * Colors: Uses CSS custom properties (design tokens) instead of hardcoded hex.
 */

// Import shared auth styles and animations (modern @use module system)
@use '../../styles' as *;

// =============================================================================
// Login-Specific Styles
// =============================================================================

/**
 * Error and success message styling with shared animation
 */
.error-message,
.success-message {
  @include fade-slide-in;
}

/**
 * Form options row: "Remember me" checkbox and "Forgot password" link.
 * Mobile-first: stacks vertically on small screens, horizontal on larger.
 *
 * @description
 * Uses `margin-block-end` (logical property) instead of `margin-bottom`.
 * Flexbox automatically handles RTL reversal -- in RTL mode, the checkbox
 * appears on the right and the forgot-password link appears on the left,
 * because `justify-content: space-between` respects the flex container's
 * direction, which is inherited from the parent `[dir="rtl"]`.
 */
/**
 * Form options row: "Remember me" checkbox + hint, and "Forgot password" link.
 * Mobile-first: stacks vertically on <375px, horizontal on 375px+.
 *
 * @description
 * The `.remember-me-wrapper` groups the checkbox and its hint text so they
 * stay together during flex wrapping. This prevents the hint from breaking
 * the layout on narrow screens (<375px).
 */
.form-options {
  display: flex;
  align-items: center;
  margin-block-end: $spacing-2;

  // Mobile base (< 375px): stack vertically
  flex-direction: column;
  align-items: stretch;
  gap: $spacing-2;

  @media (min-width: $breakpoint-xs) {
    // Modern mobile (375px+): horizontal layout, space between
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: $spacing-2;
  }

  mat-checkbox {
    // Touch-friendly target
    min-height: $spacing-11;
    display: flex;
    align-items: center;
  }

  a {
    color: $color-primary;
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    min-height: $spacing-11;  // 44px touch target
    display: flex;
    align-items: center;
    white-space: nowrap;
    transition: color $transition-normal $easing-standard, text-decoration $transition-normal $easing-standard;

    &:hover {
      color: var(--golden-wheat-medium);
      text-decoration: underline;
    }

    &:active {
      color: var(--forest-dark);
    }

    &:focus-visible {
      outline: 2px solid $color-primary;
      outline-offset: 2px;
      border-radius: 2px;
    }
  }
}

/**
 * Remember-me wrapper: groups checkbox + hint as a single flex item
 * so they don't interfere with the forgot-password link layout.
 */
.remember-me-wrapper {
  display: flex;
  flex-direction: column;
  min-width: 0; // Allow shrinking inside flex parent
}

// =============================================================================
// S2 Auth Enhancements: Warning, Lockout, and Remember-Me styles
// =============================================================================

/**
 * Warning message for low remaining login attempts
 * @description Shown when user has <= 2 attempts before account lockout.
 * Uses semantic design tokens instead of hardcoded hex colors.
 */
.warning-message {
  color: var(--color-warning-text, #e65100);
  font-size: 0.875rem;
  text-align: center;
  margin-block-end: $spacing-4;
  padding-block: $spacing-2;
  padding-inline: $spacing-3;
  background: var(--color-warning-bg, #fff3e0);
  border-radius: 0.5rem;
  border-inline-start: 4px solid var(--color-warning-border, #ff9800);
  @include fade-slide-in;
}

/**
 * Lockout message with countdown timer
 * @description Shown when account is locked after too many failed attempts.
 * Uses semantic design tokens instead of hardcoded hex colors.
 */
.lockout-message {
  color: var(--color-danger-text, #c62828);
  font-size: 0.875rem;
  text-align: center;
  margin-block-end: $spacing-4;
  padding-block: $spacing-3;
  padding-inline: $spacing-3;
  background: var(--color-danger-bg, #ffebee);
  border-radius: 0.5rem;
  border-inline-start: 4px solid var(--color-danger-border, #f44336);
  @include fade-slide-in;

  strong {
    display: block;
    margin-bottom: $spacing-1;
    font-size: 0.875rem;
  }

  p {
    margin: 0;
  }
}

/**
 * Remember-me hint text below checkbox
 * @description Uses 0.75rem (12px) minimum for WCAG 2.1 AA compliance.
 * Previous 0.6875rem (11px) was below the recommended minimum text size.
 * Color uses --color-text-secondary for sufficient contrast ratio (4.5:1+).
 */
.remember-me-hint {
  display: block;
  font-size: 0.75rem;
  color: $color-text-secondary;
  margin-top: -$spacing-1;
}

/**
 * RTL additions for login-specific elements
 */
[dir="rtl"] {
  .warning-message,
  .lockout-message {
    line-height: 1.625;
  }
}
