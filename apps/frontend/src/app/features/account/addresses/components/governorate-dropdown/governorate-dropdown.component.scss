@use '../../../_account-tokens' as t;

/**
 * @fileoverview Styles for governorate cascading dropdown component
 * @description Responsive layout for hierarchical Syrian location selection (Governorate > City > District)
 */

/** ============================================
 *  DESIGN TOKENS - Using SouqSyria Global Theme
 *  ============================================ */

/** Primary colors */
$primary-color: var(--golden-wheat-primary, #988561);
$primary-color-a11y: var(--golden-wheat-a11y, #6f6047);
$primary-light: var(--golden-wheat-light, #edebe0);

/** Info colors */
$info-color: var(--color-info, #2196f3);
$info-light: #eff6ff;
$info-medium: #dbeafe;

/** Text colors */
$text-primary: var(--forest-dark, #002623);
$text-secondary: var(--color-text-secondary, #666666);
$text-muted: var(--color-text-muted, #999999);

/** Background colors */
$surface-white: var(--charcoal-light, #ffffff);
$surface-light: var(--color-surface-neutral, #f5f5f5);

/** Border colors */
$border-color: #e5e7eb;
$border-light: #f3f4f6;

/** Spacing tokens */
$spacing-sm: 0.5rem;
$spacing-md: 1rem;
$spacing-lg: 1.5rem;

/** Border radius tokens */
$border-radius: 8px;

/** Shadow tokens */
$shadow-md: 0 2px 8px rgba(0, 0, 0, 0.08);
$shadow-lg: 0 4px 16px rgba(0, 0, 0, 0.1);

.governorate-dropdown-container {
  display: grid;
  grid-template-columns: 1fr;
  gap: $spacing-md;
  padding: $spacing-md;
  background: linear-gradient(135deg, $info-light 0%, $surface-light 100%);
  border-radius: t.$radius-md;
  border: 1px solid $border-color;

  .full-width {
    width: 100%;
  }

  // Syrian location dropdowns styling
  ::ng-deep {
    mat-form-field {
      width: 100%;

      .mat-mdc-form-field-label {
        color: $text-primary;
        font-weight: 600;
        font-size: 0.9375rem;
      }

      .mat-mdc-select {
        color: $text-primary;
        font-weight: 500;

        &[disabled] {
          color: $text-muted;
          cursor: not-allowed;

          .mat-mdc-select-trigger {
            background: #f3f4f6;
            opacity: 0.6;
          }
        }
      }

      .mat-mdc-select-arrow {
        color: $text-secondary;
      }

      &.mat-focused {
        .mat-mdc-form-field-label {
          color: $info-color;
        }

        .mdc-notched-outline__leading,
        .mdc-notched-outline__notch,
        .mdc-notched-outline__trailing {
          border-color: $info-color !important;
          border-width: 2px !important;
        }
      }

      // Disabled state styling
      &.mat-form-field-disabled {
        .mdc-notched-outline__leading,
        .mdc-notched-outline__notch,
        .mdc-notched-outline__trailing {
          border-color: #d1d5db !important;
          border-style: dashed !important;
        }

        .mat-mdc-form-field-label {
          color: $text-muted;
        }
      }

      .mat-mdc-form-field-error {
        font-size: 0.8125rem;
        color: #dc2626;
        margin-top: 0.25rem;
      }

      .mat-mdc-form-field-hint {
        color: $text-secondary;
        font-size: 0.75rem;
        font-style: italic;
      }
    }

    // Select panel customization
    .mat-mdc-select-panel {
      background: $surface-white;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      border-radius: t.$radius-md;
      max-height: 320px;

      .mat-mdc-option {
        font-size: 0.9375rem;
        padding: 0.75rem 1rem;
        color: $text-primary;
        transition: all 0.15s ease;

        &:hover {
          background: linear-gradient(135deg, #eff6ff, #dbeafe);
          color: #1e40af;
        }

        &.mat-mdc-option-active {
          background: #f0f9ff;
          color: #1e40af;
        }

        &.mdc-list-item--selected {
          background: linear-gradient(135deg, #dbeafe, #bfdbfe);
          color: #1e40af;
          font-weight: 600;

          &:hover {
            background: linear-gradient(135deg, #bfdbfe, #93c5fd);
          }
        }
      }
    }
  }

  /** ============================================
   *  P0 #7 FIX: Responsive breakpoints
   *  ============================================ */

  // Tablet: 2 columns
  @media (min-width: 600px) and (max-width: 767px) {
    grid-template-columns: repeat(2, 1fr);
    gap: $spacing-md;
  }

  // Tablet and desktop: three-column grid
  @include t.md-up {
    grid-template-columns: repeat(3, 1fr);
    gap: 1.25rem;
    padding: 1.25rem;
  }

  // Large desktop: more spacing
  @include t.desktop {
    gap: $spacing-lg;
    padding: $spacing-lg;
  }
}

// Loading state indicator
.governorate-dropdown-container {
  &.loading {
    position: relative;
    pointer-events: none;

    &::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: t.$radius-md;
      z-index: 10;
    }
  }
}

// RTL support for Arabic layout
[dir='rtl'],
:host-context([dir='rtl']) {
  .governorate-dropdown-container {
    ::ng-deep {
      mat-form-field {
        .mat-mdc-form-field-label,
        .mat-label,
        mat-label {
          text-align: right;
        }

        .mat-mdc-select-arrow {
          transform: scaleX(-1);
        }

        .mat-mdc-form-field-hint,
        .mat-mdc-form-field-error {
          text-align: right;
        }
      }
    }
  }
}

/** ============================================
 *  P1 #5 FIX: Touch targets below 44px on mobile
 *  ============================================ */
@media (max-width: 599px) {
  .governorate-dropdown-container {
    ::ng-deep {
      mat-form-field,
      .mat-mdc-form-field,
      .mat-mdc-select {
        min-height: 44px;
      }

      .mat-mdc-select-trigger {
        min-height: 44px;
      }
    }
  }
}

/** ============================================
 *  P0 #7 FIX: Mobile optimizations
 *  ============================================ */
@include t.mobile {
  .governorate-dropdown-container {
    gap: 0.75rem;
    padding: 0.75rem;

    ::ng-deep {
      mat-form-field {
        .mat-mdc-form-field-label {
          font-size: 0.875rem;
        }

        .mat-mdc-select {
          font-size: 0.875rem;
        }
      }

      .mat-mdc-select-panel {
        max-height: 240px;

        .mat-mdc-option {
          font-size: 0.875rem;
          padding: 0.625rem 0.75rem;
        }
      }
    }
  }
}

// Extra small devices
@media (max-width: 360px) {
  .governorate-dropdown-container {
    gap: 0.5rem;
    padding: 0.5rem;
  }
}

// Print styles
@media print {
  .governorate-dropdown-container {
    background: white !important;
    border: 1px solid #e5e7eb !important;
  }
}
